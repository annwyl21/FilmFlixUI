{% extends 'layout.html' %}

{% block main_content %}

<div class="title">
			
	<img id="film" src="../static/cinema-4153289_1280.jpg" alt="Film Image by Mohamed Hassan from Pixabay">

	<h3>Film Flix - Admin</h3>
</div>

<div class="menu">
	<button class="option"><a href="/admin/read">Find</a></button>
	<button class="option"><a href="/admin/update">Amend</a></button>
	<button class="option"><a href="/admin/create">Add</a></button>
	<button class="option"><a href="/admin/delete">Remove</a></button>
</div>

<div style="text-align: center;"><br>{{ message }}<br></div>

	<div class="database">

		<div class="form">
			
			<form method="POST" action="">
			{{ form.hidden_tag() }}
 
			<div class="my_fieldsets">
				<div>
					{% if action == 'read' %}
					<fieldset>
						<legend><h3>Find a film</h3></legend>
						<label for="word_to_lookup">Look for a word in the title</label>
						<br>
						<input type="text" id="word_to_lookup" name="word_to_lookup">
						<br>
					</fieldset>
			
					{% elif action == 'delete' %}
					<fieldset>
						<legend><h3>Remove a film</h3></legend>
						<label for="id_to_delete">Film ID</label>
						<br>
						<input type="number" id="id_to_delete" name="id_to_delete">
						<br>
					</fieldset>

					{% elif action == 'create' %}
					<div class="modify">
						<fieldset>
							<legend><h3>Add a Film</h3></legend>
							<label for="title">Title:</label>
							<br>
							<input type="text" id="title" name="title">
							<br>
							<label for="year_released">Year Released:</label>
							<br>
							<input type="number" id="year_released" name="year_released" min="1888" max="{{year}}">
							<br><br>
							<select id="rating" name="rating">
								<option value="" selected="selected">Select a Rating</option>
								{% for distinct_rating in ratings %}
								<option value="{{distinct_rating}}">{{ distinct_rating }}</option>
								{% endfor %}
							</select>
							<br>
							<label for="genre">Genre:</label>
							<br>
							<input type="text" id="genre" name="genre" placeholder="&#127917;">
							<br>
							<label for="duration">Duration:</label>
							<br>
							<input type="number" id="duration" name="duration" min="1" max="874">
							<br>
						</fieldset>

						<div id="genre" class="genre">
							<legend>&#127917;</legend>
							<ol>
							{% for genre in genres %}
								<li>{{ genre }}</li>
							{% endfor %}
							</ol>
						</div>
					</div>

					{% elif action == 'update' %}
					<div class='modify'>
						<fieldset>
							<legend><h3>Amend Film Details</h3></legend>
							<label for="film_id">Film ID</label>
							<br>
							<input type="number" id="film_id" name="film_id">
							<br><br>
							<select id="fieldname" name="fieldname">
								<option value="" selected="selected">Select Field to Amend</option>
								<option value="title">Title</option>
								<option value="year_released">Year Released</option>
								<option value="rating">Rating</option>
								<option value="genre">Genre</option>
								<option value="duration">Duration</option>
							</select>
							<br><br>
							<label for="fieldvalue">New value:</label>
							<br>
							<input type="text" id="fieldvalue" name="fieldvalue">
							<br>
						</fieldset>

						<div id="genre" class="genre">
							<legend>&#127917;</legend>
							<ol>
							{% for genre in genres %}
								<li>{{ genre }}</li>
							{% endfor %}
							</ol>
						</div>
					</div>

					{% endif %}
				</div>
				<br>
				<button type="submit">Submit</button>
			</form>
		</div>

		<div>
			{% if confirmation %}
			<fieldset>
				<legend>Database Response:</legend>
				<p>{{ confirmation }}</p>
				
			</fieldset>
			<br>
			<div class="exit">
				<button class="alt_options"><a href="/admin/none">See database</a></button>
			</div>

			{% else %}
			<h2>Films Available:</h2>
			<table>
				<tr>
					<th>Film ID</th>
					<th>Film Title</th>
					<th>Year Released</th>
					<th>Rating</th>
					<th>Duration</th>
					<th>Genre</th>
				</tr>
				{% for film in films %}
				<tr>
					<td>{{ film['id'] }}</td>
					<td>{{ film['title'] }}</td>
					<td>{{ film['year_released'] }}</td>
					<td>{{ film['rating'] }}</td>
					<td>{{ film['duration'] }}</td>
					<td>{{ film['genre'] }}</td>
				</tr>
				{% endfor %}
			</table>

			{% endif %}
		</div>

	</div>

{% endblock %}